<!DOCTYPE html>
<html lang="en">
<%- include('partials/head', {title: "Alarms"}) %> 
    <body>
        <%- include('partials/navbar') %> 
        <div class="flex-grow-1">
            <div class="container">
                <h3 class="my-4 text-center">Alarm History</h3>
                <table class="table">
                    <thead>
                        <tr class="table-dark">
                          <th scope="col">#</th>
                          <th scope="col">Date</th>
                        <th scope="col">Alarm</th>
                      </tr>
                    </thead>
                    <tbody>
                        <% alarms.forEach((alarm, index) =>{ %>
                            <%
                                const date = new Date(alarm.date);
                                const year = date.getFullYear();
                                const month = ('0' + (date.getMonth() + 1)).slice(-2);
                                const day = ('0' + date.getDate()).slice(-2);
                                const hours = ('0' + date.getHours()).slice(-2);
                                const minutes = ('0' + date.getMinutes()).slice(-2);
                                const seconds = ('0' + date.getSeconds()).slice(-2);
                                const formattedDateTime = `${day}/${month}/${year} ${hours}:${minutes}:${seconds}`;
                            %>
                            <tr>
                                <th scope="row"><%= index+1 %></th>
                                <td><%=formattedDateTime%></td>
                                <td><%=alarm.message%></td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        </div>
        <%- include('partials/footer') %>
    </body>
</html>